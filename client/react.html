<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>README: Система управления финансами, тендерами и заметками</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px; background-color: #f4f4f4; color: #333; }
        h1, h2, h3, h4 { color: #1976d2; margin-bottom: 10px; }
        h1 { font-size: 2.5em; border-bottom: 2px solid #1976d2; padding-bottom: 5px; }
        h2 { font-size: 2em; margin-top: 30px; }
        h3 { font-size: 1.6em; margin-top: 20px; }
        h4 { font-size: 1.3em; margin-top: 15px; }
        p { margin: 10px 0; font-size: 1.1em; }
        ul, ol { margin: 10px 0 20px 20px; padding-left: 20px; }
        li { margin-bottom: 8px; }
        code { background-color: #e0e0e0; padding: 2px 6px; border-radius: 4px; font-family: 'Courier New', Courier, monospace; font-size: 0.95em; }
        pre { background-color: #2e2e2e; color: #fff; padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.9em; line-height: 1.4; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; background-color: #fff; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #1976d2; color: #fff; font-weight: bold; }
        tr:hover { background-color: #f5f5f5; }
        .section { margin-bottom: 40px; }
    </style>
</head>
<body>
    <h1>Система управления финансами, тендерами и заметками</h1>

    <div class="section">
        <h2>Описание системы</h2>
        <p>
            Это современное веб-приложение на основе React, предназначенное для управления финансами, тендерами, инвестициями, заметками и пользователями. Система построена с использованием Redux для управления состоянием, Material-UI для интерфейса, WebSocket для обновлений в реальном времени и REST API для взаимодействия с сервером. Она ориентирована на малый бизнес и индивидуальных предпринимателей, предоставляя модули для бухгалтерии, финансов, тендеров, инвестиций, заметок и администрирования пользователей.
        </p>
        <p>
            Приложение отличается модульной архитектурой, высокой степенью кастомизации и интеграцией с внешними сервисами (Excel, WebSocket). Оно поддерживает адаптивный дизайн, переключение тем (светлая/тёмная) и расширяемость для добавления новых функций.
        </p>
    </div>

    <div class="section">
        <h2>Архитектура</h2>
        <h3>Общая структура</h3>
        <ul>
            <li><strong>Frontend</strong>: React, Redux, Material-UI, Socket.IO.</li>
            <li><strong>Backend</strong>: Предполагаемый сервер с REST API и WebSocket (не описан в файлах).</li>
            <li><strong>Хранилище</strong>: Redux с персистентностью через <code>redux-persist</code> в <code>localStorage</code>.</li>
            <li><strong>Маршрутизация</strong>: <code>react-router-dom</code> для навигации между страницами.</li>
            <li><strong>Утилиты</strong>: Модули для форматирования, расчётов и логирования.</li>
        </ul>

        <h3>Директории</h3>
        <table>
            <tr><th>Путь</th><th>Описание</th></tr>
            <tr><td><code>src/</code></td><td>Корневая директория проекта.</td></tr>
            <tr><td><code>src/pages/</code></td><td>Основные страницы приложения (<code>Home</code>, <code>Accounting</code>, <code>Finance</code>, <code>Investments</code>, <code>Tenders</code>, <code>Notes</code>, <code>UserManagement</code>).</td></tr>
            <tr><td><code>src/store/</code></td><td>Redux-логика (редьюсеры, действия, middleware).</td></tr>
            <tr><td><code>src/utils/</code></td><td>Общие утилиты (<code>logger.js</code>, <code>hashPassword.js</code>).</td></tr>
            <tr><td><code>src/pages/Home/</code></td><td>Компоненты главной страницы и диалоги.</td></tr>
            <tr><td><code>src/pages/Accounting/</code></td><td>Компоненты модуля бухгалтерии.</td></tr>
            <tr><td><code>src/pages/Finance/</code></td><td>Компоненты финансового модуля.</td></tr>
            <tr><td><code>src/pages/Investments/</code></td><td>Компоненты модуля инвестиций.</td></tr>
            <tr><td><code>src/pages/Tenders/</code></td><td>Компоненты модуля тендеров.</td></tr>
            <tr><td><code>src/pages/Notes/</code></td><td>Компоненты модуля заметок.</td></tr>
        </table>
    </div>

    <div class="section">
        <h2>Модули системы</h2>

        <h3>1. Главная страница (Home)</h3>
        <p><strong>Файлы:</strong> <code>HomePage.js</code>, <code>QuickActions.js</code>, <code>TenderSection.js</code>, <code>TenderView.js</code>, <code>CreditCards.js</code>, диалоги (<code>NoteDialog.js</code>, <code>PreviewDialog.js</code>, и др.), хуки (<code>useAccounts.js</code>, <code>useTenders.js</code>), утилиты (<code>tenderUtils.js</code>, <code>formatUtils.js</code>)</p>
        <p>
            Главная страница объединяет быстрый доступ к ключевым функциям: просмотр тендеров, кредитных карт, счетов и создание заметок. Использует кастомные хуки для работы с данными и диалоги для интерактивных действий (например, проверка контрагентов, предпросмотр файлов).
        </p>

        <h3>2. Бухгалтерия (Accounting)</h3>
        <p><strong>Файлы:</strong> <code>AccountingPage.js</code>, <code>DashboardContent.js</code>, <code>AccountsContent.js</code>, <code>TaxesContent.js</code>, <code>CounterpartiesContent.js</code>, <code>DocumentsContent.js</code>, <code>TendersContent.js</code>, <code>KUDIRContent.js</code>, <code>DrawerMenu.js</code>, <code>theme.js</code>, <code>AnalyticsPage.js</code>, <code>AccountCards.js</code></p>
        <p>
            Модуль бухгалтерии предоставляет интерфейс для управления счетами, налогами, контрагентами, документами, тендерами и КУДиР. Основной компонент <code>AccountingPage.js</code> использует боковое меню и динамические секции с анимациями через <code>framer-motion</code>.
        </p>

        <h3>3. Финансы (Finance)</h3>
        <p><strong>Файлы:</strong> <code>TransactionForm.js</code>, <code>DebtTable.js</code>, <code>EditCreditCardDialog.js</code>, <code>AddDebtDialog.js</code>, <code>AddLoanDialog.js</code>, <code>HistoryDialog.js</code>, <code>ReportDialog.js</code>, <code>styles.js</code></p>
        <p>
            Финансовый модуль управляет транзакциями, долгами, займами и кредитными картами. Использует диалоговые окна для ввода данных и отчётов, интегрируется с Redux для хранения и обработки финансовых операций.
        </p>

        <h3>4. Инвестиции (Investments)</h3>
        <p><strong>Файлы:</strong> <code>InvestmentsPage.js</code>, <code>Sidebar.js</code>, <code>PortfolioSection.js</code>, <code>AnalyticsSection.js</code>, <code>AddAssetForm.js</code>, <code>ExportSection.js</code>, <code>IntegrationSection.js</code>, <code>RiskSection.js</code>, <code>TaxesSection.js</code>, <code>ImportSection.js</code>, <code>calculations.js</code></p>
        <p>
            Модуль инвестиций позволяет управлять портфелями, добавлять активы, анализировать риски, налоги и экспортировать данные. Использует <code>recharts</code> для визуализации и Redux для управления портфелями.
        </p>

        <h3>5. Тендеры (Tenders)</h3>
        <p><strong>Файлы:</strong> <code>TendersPage.js</code>, <code>TenderTable.js</code>, <code>TenderMenu.js</code>, <code>TenderRow.js</code>, <code>ColumnSettingsModal.js</code>, <code>ReportModal.js</code></p>
        <p>
            Модуль тендеров предоставляет таблицу для управления тендерами с фильтрацией, сортировкой, drag-and-drop и экспортом в Excel. Поддерживает редактирование заметок через WYSIWYG-редактор и настройку колонок.
        </p>

        <h3>6. Заметки (Notes)</h3>
        <p><strong>Файлы:</strong> <code>NotePage.js</code>, <code>TaskCard.js</code>, <code>BookmarkCard.js</code>, <code>BlockCard.js</code></p>
        <p>
            Модуль заметок позволяет создавать задачи, закладки и блоки с поддержкой перетаскивания, редактирования и тегов. Карточки адаптируются по ширине и используют Redux для сохранения данных.
        </p>

        <h3>7. Управление пользователями (UserManagement)</h3>
        <p><strong>Файлы:</strong> <code>UserManagementPage.js</code></p>
        <p>
            Модуль администрирования для управления пользователями и ролями. Поддерживает создание, редактирование, удаление пользователей, настройку разрешений и имперсонацию через WebSocket.
        </p>

        <h3>8. Общие утилиты</h3>
        <p><strong>Файлы:</strong> <code>api.js</code>, <code>socket.js</code>, <code>hashPassword.js</code>, <code>logger.js</code>, <code>utils.js</code></p>
        <p>
            Утилитные модули обеспечивают API-вызовы, WebSocket-соединение, хэширование паролей, логирование и форматирование данных.
        </p>
    </div>

    <div class="section">
        <h2>Redux и состояние</h2>
        <h3>Редьюсеры</h3>
        <ul>
            <li><code>authReducer.js</code>: Аутентификация, роли, тема.</li>
            <li><code>financeReducer.js</code>: Счета, транзакции, долги, займы.</li>
            <li><code>tendersReducer.js</code>: Тендеры, бюджет, заметки.</li>
            <li><code>accountingReducer.js</code>: Оплаты и аналитика бухгалтерии.</li>
            <li><code>investmentsReducer.js</code>: Портфели и активы.</li>
            <li><code>galleryReducer.js</code>: Категории и медиафайлы.</li>
            <li><code>noteReducer.js</code>: Задачи, закладки, блоки.</li>
            <li><code>rootreducer.js</code>: Корневой редьюсер с персистентностью.</li>
        </ul>

        <h3>Действия</h3>
        <ul>
            <li><code>authActions.js</code>: Вход, выход, обновление токена.</li>
            <li><code>financeActions.js</code>: Управление финансами.</li>
            <li><code>tenderActions.js</code>: Управление тендерами.</li>
        </ul>

        <h3>Хранилище</h3>
        <p>
            Хранилище настроено в <code>index.js</code> (src/store/index.js) с middleware для WebSocket и персистентностью через <code>redux-persist</code>. Использует <code>socketMiddleware</code> для обработки событий в реальном времени.
        </p>
    </div>

    <div class="section">
        <h2>Зависимости</h2>
        <table>
            <tr><th>Библиотека</th><th>Использование</th></tr>
            <tr><td><code>react</code></td><td>Основной фреймворк.</td></tr>
            <tr><td><code>react-redux</code></td><td>Управление состоянием.</td></tr>
            <tr><td><code>@reduxjs/toolkit</code></td><td>Упрощённое создание редьюсеров и действий.</td></tr>
            <tr><td><code>redux-persist</code></td><td>Сохранение состояния в <code>localStorage</code>.</td></tr>
            <tr><td><code>@mui/material</code></td><td>UI-компоненты и стилизация.</td></tr>
            <tr><td><code>socket.io-client</code></td><td>WebSocket-соединение.</td></tr>
            <tr><td><code>axios</code>, <code>axios-retry</code></td><td>API-вызовы с повторными попытками.</td></tr>
            <tr><td><code>recharts</code></td><td>Графики в модуле инвестиций.</td></tr>
            <tr><td><code>papaparse</code>, <code>xlsx</code>, <code>file-saver</code></td><td>Работа с CSV и Excel.</td></tr>
            <tr><td><code>react-draft-wysiwyg</code>, <code>draft-js</code></td><td>WYSIWYG-редактор для заметок.</td></tr>
            <tr><td><code>react-beautiful-dnd</code></td><td>Drag-and-drop в таблицах.</td></tr>
            <tr><td><code>framer-motion</code></td><td>Анимации переходов.</td></tr>
            <tr><td><code>moment</code></td><td>Работа с датами.</td></tr>
            <tr><td><code>lodash</code></td><td>Утилиты (debounce).</td></tr>
            <tr><td><code>jwt-decode</code></td><td>Декодирование JWT-токенов.</td></tr>
            <tr><td><code>bcrypt</code></td><td>Хэширование паролей.</td></tr>
        </table>
        <p>Установка всех зависимостей:</p>
        <pre>
npm install react react-redux @reduxjs/toolkit redux-persist @mui/material @mui/icons-material socket.io-client axios axios-retry recharts papaparse xlsx file-saver react-draft-wysiwyg draft-js react-beautiful-dnd framer-motion moment lodash jwt-decode bcrypt react-router-dom @mui/x-date-pickers date-fns
        </pre>
    </div>

    <div class="section">
        <h2>Установка и запуск</h2>
        <ol>
            <li>Клонировать репозиторий: <code>git clone [repository-url]</code></li>
            <li>Установить зависимости: <code>npm install</code></li>
            <li>Настроить переменные окружения в <code>.env</code>:
                <pre>
REACT_APP_API_URL=[ваш API URL]
REACT_APP_SOCKET_URL=[ваш WebSocket URL]
REACT_APP_LOG_LEVEL=info
                </pre>
            </li>
            <li>Запустить приложение: <code>npm start</code></li>
        </ol>
    </div>

    <div class="section">
        <h2>Рекомендации для разработчиков</h2>
        <h3>Оптимизация</h3>
        <ul>
            <li>Использовать <code>React.memo</code> и <code>useMemo</code> для компонентов с большими списками (например, <code>TenderTable</code>).</li>
            <li>Вынести сложные вычисления из рендера в кастомные хуки или утилиты.</li>
            <li>Добавить ленивую загрузку (<code>React.lazy</code>) для крупных модулей (например, <code>InvestmentsPage</code>).</li>
        </ul>

        <h3>Типизация</h3>
        <ul>
            <li>Перейти на TypeScript для строгой типизации пропсов и состояния.</li>
            <li>Заменить JSDoc на интерфейсы и типы.</li>
        </ul>

        <h3>Расширяемость</h3>
        <ul>
            <li>Добавить поддержку новых модулей через динамическую маршрутизацию.</li>
            <li>Создать общий компонент <code>Table</code> для повторного использования в <code>TenderTable</code>, <code>UserManagementPage</code>.</li>
            <li>Реализовать кастомную тему Material-UI в <code>theme.js</code>.</li>
        </ul>

        <h3>Безопасность</h3>
        <ul>
            <li>Проверять валидность токенов на уровне WebSocket-соединения.</li>
            <li>Добавить CSRF-защиту для API-вызовов.</li>
            <li>Использовать <code>helmet</code> на сервере для заголовков безопасности.</li>
        </ul>

        <h3>Тестирование</h3>
        <ul>
            <li>Добавить юнит-тесты для утилит (<code>calculations.js</code>, <code>utils.js</code>) через Jest.</li>
            <li>Реализовать интеграционные тесты для Redux-действий и API-вызовов.</li>
            <li>Провести E2E-тестирование с Cypress для ключевых сценариев.</li>
        </ul>
    </div>

    <div class="section">
        <h2>Заключение</h2>
        <p>
            Эта система — мощное и гибкое решение для управления бизнес-процессами, построенное на современных технологиях React. Она сочетает в себе модульность, производительность и удобство использования, предоставляя разработчикам чёткую структуру для дальнейшего расширения. Следуя рекомендациям, можно улучшить её масштабируемость, безопасность и производительность, адаптировав под конкретные нужды.
        </p>
    </div>
</body>
</html>